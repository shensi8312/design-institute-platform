{
  "id": "document_knowledge_workflow",
  "name": "æ–‡æ¡£çŸ¥è¯†åº“æ„å»ºå·¥ä½œæµ",
  "description": "ä¸Šä¼ â†’è¯†åˆ«â†’Redisé˜Ÿåˆ—â†’å¹¶è¡Œæ¶ˆè´¹(å‘é‡åº“+LangExtractçŸ¥è¯†å›¾è°±)",
  "category": "knowledge",
  "icon": "ğŸ“š",
  "version": "2.0.0",
  "nodes": [
    {
      "id": "upload",
      "type": "trigger",
      "position": { "x": 100, "y": 200 },
      "data": {
        "label": "æ–‡æ¡£ä¸Šä¼ ",
        "triggerType": "file_upload",
        "fileTypes": [".pdf", ".docx", ".txt", ".md", ".pptx", ".xlsx"],
        "storage": "MinIO"
      }
    },
    {
      "id": "recognize",
      "type": "process",
      "position": { "x": 300, "y": 200 },
      "data": {
        "label": "æ–‡æ¡£è¯†åˆ«",
        "engine": "DocumentRecognition",
        "service": "http://localhost:8086/api/recognize",
        "config": {
          "ocr": true,
          "yolo": false,
          "extract_text": true,
          "extract_images": true,
          "extract_tables": true
        }
      }
    },
    {
      "id": "redis_queue",
      "type": "queue",
      "position": { "x": 500, "y": 200 },
      "data": {
        "label": "Redisé˜Ÿåˆ—",
        "engine": "RedisQueue",
        "config": {
          "queue_name": "document_processing",
          "priority": "normal",
          "ttl": 3600
        }
      }
    },
    {
      "id": "consumer_split",
      "type": "parallel",
      "position": { "x": 700, "y": 200 },
      "data": {
        "label": "å¹¶è¡Œæ¶ˆè´¹",
        "description": "ä»Redisé˜Ÿåˆ—å¹¶è¡Œæ¶ˆè´¹"
      }
    },
    {
      "id": "vector_consumer",
      "type": "process",
      "position": { "x": 900, "y": 100 },
      "data": {
        "label": "å‘é‡åº“æ¶ˆè´¹è€…",
        "engine": "VectorConsumer",
        "service": "http://localhost:8085/api/vectorize",
        "config": {
          "consumer_name": "vector_consumer",
          "batch_size": 10,
          "embedding_model": "nomic-embed-text",
          "chunk_size": 500,
          "chunk_overlap": 50,
          "storage": "Milvus"
        }
      }
    },
    {
      "id": "langextract_consumer",
      "type": "process",
      "position": { "x": 900, "y": 300 },
      "data": {
        "label": "LangExtractæ¶ˆè´¹è€…",
        "engine": "LangExtractConsumer",
        "service": "http://localhost:8092/api/extract",
        "config": {
          "consumer_name": "langextract_consumer",
          "batch_size": 5,
          "mode": "learn_and_infer",
          "extract_entities": true,
          "extract_relations": true,
          "extract_rules": true,
          "model": "qwen2.5",
          "storage": "Neo4j"
        }
      }
    },
    {
      "id": "vector_store",
      "type": "storage",
      "position": { "x": 1100, "y": 100 },
      "data": {
        "label": "Milvuså­˜å‚¨",
        "engine": "MilvusStore",
        "config": {
          "collection": "knowledge_base",
          "index_type": "IVF_FLAT",
          "metric_type": "L2"
        }
      }
    },
    {
      "id": "graph_store",
      "type": "storage",
      "position": { "x": 1100, "y": 300 },
      "data": {
        "label": "Neo4jå­˜å‚¨",
        "engine": "Neo4jStore",
        "config": {
          "database": "knowledge_graph",
          "create_entities": true,
          "create_relations": true,
          "merge_duplicates": true
        }
      }
    },
    {
      "id": "status_update",
      "type": "process",
      "position": { "x": 1300, "y": 200 },
      "data": {
        "label": "çŠ¶æ€æ›´æ–°",
        "engine": "StatusUpdater",
        "config": {
          "update_vector_status": true,
          "update_graph_status": true,
          "table": "knowledge_documents"
        }
      }
    },
    {
      "id": "complete",
      "type": "output",
      "position": { "x": 1500, "y": 200 },
      "data": {
        "label": "å®Œæˆé€šçŸ¥",
        "outputType": "notification",
        "channels": ["websocket", "api_response"]
      }
    }
  ],
  "edges": [
    { "id": "e1", "source": "upload", "target": "recognize", "label": "æ–‡ä»¶è·¯å¾„" },
    { "id": "e2", "source": "recognize", "target": "redis_queue", "label": "è¯†åˆ«ç»“æœ" },
    { "id": "e3", "source": "redis_queue", "target": "consumer_split", "label": "å…¥é˜Ÿ" },
    { "id": "e4", "source": "consumer_split", "target": "vector_consumer", "label": "æ¶ˆè´¹1" },
    { "id": "e5", "source": "consumer_split", "target": "langextract_consumer", "label": "æ¶ˆè´¹2" },
    { "id": "e6", "source": "vector_consumer", "target": "vector_store", "label": "å‘é‡åŒ–" },
    { "id": "e7", "source": "langextract_consumer", "target": "graph_store", "label": "çŸ¥è¯†æå–" },
    { "id": "e8", "source": "vector_store", "target": "status_update", "label": "å®Œæˆ1" },
    { "id": "e9", "source": "graph_store", "target": "status_update", "label": "å®Œæˆ2" },
    { "id": "e10", "source": "status_update", "target": "complete", "label": "é€šçŸ¥" }
  ]
}