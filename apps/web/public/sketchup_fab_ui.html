<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå»ºç­‘è®¾è®¡åŠ©æ‰‹</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        .header p {
            opacity: 0.9;
            font-size: 14px;
        }
        .content {
            padding: 30px;
        }
        .step {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
        }
        .step:last-child {
            border-bottom: none;
        }
        .step-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .step-number {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 16px;
            font-weight: bold;
        }
        .industry-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        .industry-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        .industry-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .industry-card.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .industry-icon {
            font-size: 36px;
            margin-bottom: 10px;
        }
        .industry-name {
            font-size: 16px;
            font-weight: 600;
        }
        .building-types {
            display: none;
        }
        .building-types.active {
            display: block;
        }
        .type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
        }
        .type-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }
        .type-btn:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }
        .type-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        .params-section {
            display: none;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        .params-section.active {
            display: block;
        }
        .param-group {
            margin-bottom: 20px;
        }
        .param-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
        }
        .param-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        .param-input:focus {
            outline: none;
            border-color: #667eea;
        }
        .param-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }
        .generate-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .hint {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin-top: 15px;
            border-radius: 4px;
            font-size: 13px;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—ï¸ AIå‚æ•°åŒ–å»ºç­‘ç”Ÿæˆ</h1>
            <p>ä¸‰æ­¥å®Œæˆï¼šé€‰æ‹©è¡Œä¸š â†’ é€‰æ‹©å»ºç­‘ç±»å‹ â†’ é…ç½®å‚æ•°ç”Ÿæˆ</p>
        </div>

        <div class="content">
            <!-- Step 1: é€‰æ‹©è¡Œä¸š -->
            <div class="step">
                <div class="step-title">
                    <span class="step-number">1</span>
                    é€‰æ‹©è¡Œä¸šç±»å‹
                </div>
                <div class="industry-grid" id="industryGrid">
                    <div class="industry-card" data-industry="fab">
                        <div class="industry-icon">ğŸ”¬</div>
                        <div class="industry-name">Fab å‚è®¾è®¡</div>
                    </div>
                    <div class="industry-card" data-industry="pharma">
                        <div class="industry-icon">ğŸ’Š</div>
                        <div class="industry-name">è¯å‚è®¾è®¡</div>
                    </div>
                    <div class="industry-card" data-industry="datacenter">
                        <div class="industry-icon">ğŸ–¥ï¸</div>
                        <div class="industry-name">æ•°æ®ä¸­å¿ƒ</div>
                    </div>
                    <div class="industry-card" data-industry="chemical">
                        <div class="industry-icon">âš—ï¸</div>
                        <div class="industry-name">åŒ–å·¥å‚</div>
                    </div>
                </div>
            </div>

            <!-- Step 2: é€‰æ‹©å»ºç­‘ç±»å‹ -->
            <div class="step">
                <div class="step-title">
                    <span class="step-number">2</span>
                    é€‰æ‹©å»ºç­‘ç±»å‹
                </div>

                <!-- Fabå‚å»ºç­‘ç±»å‹ -->
                <div class="building-types" id="fab-buildings">
                    <div class="type-grid">
                        <button class="type-btn" data-type="cleanroom">æ´å‡€å®¤ä¸»å‚æˆ¿</button>
                        <button class="type-btn" data-type="power">åŠ¨åŠ›ç«™</button>
                        <button class="type-btn" data-type="cooling">å†·å†»ç«™</button>
                        <button class="type-btn" data-type="chemical">åŒ–å­¦å“åº“</button>
                        <button class="type-btn" data-type="gas">æ°”ä½“ç«™</button>
                        <button class="type-btn" data-type="office">åŠå…¬æ¥¼</button>
                        <button class="type-btn" data-type="warehouse">ä»“åº“</button>
                        <button class="type-btn" data-type="dorm">å®¿èˆæ¥¼</button>
                        <button class="type-btn" data-type="canteen">é£Ÿå ‚</button>
                    </div>
                </div>

                <!-- è¯å‚å»ºç­‘ç±»å‹ -->
                <div class="building-types" id="pharma-buildings">
                    <div class="type-grid">
                        <button class="type-btn" data-type="gmp_workshop">GMPè½¦é—´</button>
                        <button class="type-btn" data-type="material_warehouse">åŸæ–™åº“</button>
                        <button class="type-btn" data-type="product_warehouse">æˆå“åº“</button>
                        <button class="type-btn" data-type="qa_lab">è´¨æ£€æ¥¼</button>
                        <button class="type-btn" data-type="office">åŠå…¬æ¥¼</button>
                        <button class="type-btn" data-type="utility">åŠ¨åŠ›è½¦é—´</button>
                    </div>
                </div>

                <!-- æ•°æ®ä¸­å¿ƒå»ºç­‘ç±»å‹ -->
                <div class="building-types" id="datacenter-buildings">
                    <div class="type-grid">
                        <button class="type-btn" data-type="server_room">ä¸»æœºæˆ¿</button>
                        <button class="type-btn" data-type="ups_room">UPSå®¤</button>
                        <button class="type-btn" data-type="cooling_tower">å†·å´å¡”</button>
                        <button class="type-btn" data-type="office">åŠå…¬æ¥¼</button>
                    </div>
                </div>

                <!-- åŒ–å·¥å‚å»ºç­‘ç±»å‹ -->
                <div class="building-types" id="chemical-buildings">
                    <div class="type-grid">
                        <button class="type-btn" data-type="reactor_workshop">ååº”è½¦é—´</button>
                        <button class="type-btn" data-type="storage_tank">å‚¨ç½åŒº</button>
                        <button class="type-btn" data-type="control_room">æ§åˆ¶å®¤</button>
                        <button class="type-btn" data-type="office">åŠå…¬æ¥¼</button>
                    </div>
                </div>
            </div>

            <!-- Step 3: é…ç½®å‚æ•° -->
            <div class="step">
                <div class="step-title">
                    <span class="step-number">3</span>
                    é…ç½®å»ºç­‘å‚æ•°
                </div>
                <div id="paramsContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // å»ºç­‘å‚æ•°é…ç½®
        const buildingParams = {
            // Fabå‚å»ºç­‘å‚æ•°
            cleanroom: {
                name: 'æ´å‡€å®¤ä¸»å‚æˆ¿',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 144, min: 50, max: 300 },
                    width: { label: 'å®½åº¦(m)', default: 72, min: 30, max: 150 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 4.5, min: 3, max: 8 },
                    floors: { label: 'å±‚æ•°', default: 4, min: 1, max: 10 },
                    tech_layer_height: { label: 'æŠ€æœ¯å¤¹å±‚é«˜(m)', default: 3.5, min: 2, max: 6 }
                }
            },
            power: {
                name: 'åŠ¨åŠ›ç«™',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 36, min: 20, max: 80 },
                    width: { label: 'å®½åº¦(m)', default: 24, min: 15, max: 50 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 6, min: 4, max: 10 },
                    equipment_floor_height: { label: 'è®¾å¤‡å±‚é«˜(m)', default: 4, min: 3, max: 6 }
                }
            },
            cooling: {
                name: 'å†·å†»ç«™',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 30, min: 15, max: 60 },
                    width: { label: 'å®½åº¦(m)', default: 20, min: 12, max: 40 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 5, min: 4, max: 8 },
                    cooling_tower_height: { label: 'å†·å´å¡”é«˜(m)', default: 8, min: 5, max: 15 }
                }
            },
            chemical: {
                name: 'åŒ–å­¦å“åº“',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 24, min: 12, max: 50 },
                    width: { label: 'å®½åº¦(m)', default: 18, min: 10, max: 40 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 4.5, min: 3.5, max: 6 },
                    partition_count: { label: 'éš”é—´æ•°', default: 4, min: 2, max: 10 }
                }
            },
            gas: {
                name: 'æ°”ä½“ç«™',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 20, min: 10, max: 40 },
                    width: { label: 'å®½åº¦(m)', default: 15, min: 8, max: 30 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 4, min: 3, max: 6 }
                }
            },
            office: {
                name: 'åŠå…¬æ¥¼',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 60, min: 30, max: 120 },
                    width: { label: 'å®½åº¦(m)', default: 15, min: 12, max: 24 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 3.6, min: 3, max: 4.5 },
                    floors: { label: 'å±‚æ•°', default: 6, min: 2, max: 20 }
                }
            },
            warehouse: {
                name: 'ä»“åº“',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 50, min: 25, max: 100 },
                    width: { label: 'å®½åº¦(m)', default: 30, min: 20, max: 60 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 8, min: 5, max: 12 },
                    shelf_height: { label: 'è´§æ¶é«˜(m)', default: 6, min: 3, max: 10 }
                }
            },
            dorm: {
                name: 'å®¿èˆæ¥¼',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 72, min: 40, max: 100 },
                    width: { label: 'å®½åº¦(m)', default: 12, min: 10, max: 16 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 3, min: 2.8, max: 3.6 },
                    floors: { label: 'å±‚æ•°', default: 6, min: 3, max: 12 }
                }
            },
            canteen: {
                name: 'é£Ÿå ‚',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 36, min: 20, max: 60 },
                    width: { label: 'å®½åº¦(m)', default: 24, min: 15, max: 40 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 4.5, min: 3.5, max: 6 },
                    floors: { label: 'å±‚æ•°', default: 2, min: 1, max: 3 }
                }
            },
            // è¯å‚å»ºç­‘å‚æ•°
            gmp_workshop: {
                name: 'GMPè½¦é—´',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 80, min: 40, max: 150 },
                    width: { label: 'å®½åº¦(m)', default: 50, min: 25, max: 100 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 4.2, min: 3.5, max: 6 },
                    floors: { label: 'å±‚æ•°', default: 3, min: 1, max: 5 },
                    clean_level: { label: 'æ´å‡€ç­‰çº§', default: '100000çº§', type: 'text' }
                }
            },
            material_warehouse: {
                name: 'åŸæ–™åº“',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 40, min: 20, max: 80 },
                    width: { label: 'å®½åº¦(m)', default: 30, min: 15, max: 60 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 6, min: 4, max: 10 },
                    temperature_control: { label: 'æ’æ¸©åŒºåŸŸ', default: 'æ˜¯', type: 'text' }
                }
            },
            product_warehouse: {
                name: 'æˆå“åº“',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 50, min: 25, max: 100 },
                    width: { label: 'å®½åº¦(m)', default: 35, min: 20, max: 70 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 5, min: 3.5, max: 8 }
                }
            },
            qa_lab: {
                name: 'è´¨æ£€æ¥¼',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 40, min: 20, max: 80 },
                    width: { label: 'å®½åº¦(m)', default: 20, min: 12, max: 40 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 3.9, min: 3.3, max: 5 },
                    floors: { label: 'å±‚æ•°', default: 4, min: 2, max: 8 }
                }
            },
            utility: {
                name: 'åŠ¨åŠ›è½¦é—´',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 30, min: 15, max: 60 },
                    width: { label: 'å®½åº¦(m)', default: 20, min: 12, max: 40 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 6, min: 4.5, max: 9 }
                }
            },
            // æ•°æ®ä¸­å¿ƒå»ºç­‘å‚æ•°
            server_room: {
                name: 'ä¸»æœºæˆ¿',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 60, min: 30, max: 120 },
                    width: { label: 'å®½åº¦(m)', default: 40, min: 20, max: 80 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 4.5, min: 3.5, max: 6 },
                    raised_floor_height: { label: 'æ¶ç©ºåœ°æ¿é«˜(m)', default: 0.6, min: 0.3, max: 1 }
                }
            },
            ups_room: {
                name: 'UPSå®¤',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 30, min: 15, max: 60 },
                    width: { label: 'å®½åº¦(m)', default: 20, min: 12, max: 40 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 5, min: 3.5, max: 7 }
                }
            },
            cooling_tower: {
                name: 'å†·å´å¡”',
                params: {
                    diameter: { label: 'ç›´å¾„(m)', default: 8, min: 4, max: 15 },
                    height: { label: 'é«˜åº¦(m)', default: 12, min: 6, max: 20 }
                }
            },
            // åŒ–å·¥å‚å»ºç­‘å‚æ•°
            reactor_workshop: {
                name: 'ååº”è½¦é—´',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 50, min: 25, max: 100 },
                    width: { label: 'å®½åº¦(m)', default: 30, min: 15, max: 60 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 12, min: 8, max: 20 }
                }
            },
            storage_tank: {
                name: 'å‚¨ç½åŒº',
                params: {
                    diameter: { label: 'å‚¨ç½ç›´å¾„(m)', default: 10, min: 5, max: 20 },
                    height: { label: 'å‚¨ç½é«˜åº¦(m)', default: 15, min: 8, max: 25 },
                    tank_count: { label: 'å‚¨ç½æ•°é‡', default: 4, min: 1, max: 20 }
                }
            },
            control_room: {
                name: 'æ§åˆ¶å®¤',
                params: {
                    length: { label: 'é•¿åº¦(m)', default: 30, min: 15, max: 60 },
                    width: { label: 'å®½åº¦(m)', default: 12, min: 8, max: 24 },
                    floor_height: { label: 'å±‚é«˜(m)', default: 3.6, min: 3, max: 5 },
                    floors: { label: 'å±‚æ•°', default: 2, min: 1, max: 4 }
                }
            }
        };

        let selectedIndustry = null;
        let selectedBuildingType = null;

        // è¡Œä¸šé€‰æ‹©
        document.querySelectorAll('.industry-card').forEach(card => {
            card.addEventListener('click', function() {
                // æ¸…é™¤æ‰€æœ‰active
                document.querySelectorAll('.industry-card').forEach(c => c.classList.remove('active'));
                document.querySelectorAll('.building-types').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                document.getElementById('paramsContainer').innerHTML = '';

                // è®¾ç½®å½“å‰active
                this.classList.add('active');
                selectedIndustry = this.dataset.industry;
                selectedBuildingType = null;

                // æ˜¾ç¤ºå¯¹åº”çš„å»ºç­‘ç±»å‹
                const buildingTypesDiv = document.getElementById(`${selectedIndustry}-buildings`);
                if (buildingTypesDiv) {
                    buildingTypesDiv.classList.add('active');
                }
            });
        });

        // å»ºç­‘ç±»å‹é€‰æ‹©
        document.querySelectorAll('.type-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedBuildingType = this.dataset.type;

                // æ˜¾ç¤ºå‚æ•°é…ç½®
                showParams(selectedBuildingType);
            });
        });

        // æ˜¾ç¤ºå‚æ•°é…ç½®
        function showParams(buildingType) {
            const config = buildingParams[buildingType];
            if (!config) return;

            let html = `
                <div class="params-section active">
                    <h3 style="margin-bottom: 20px; color: #333;">ğŸ“ ${config.name} - å‚æ•°é…ç½®</h3>
                    <div class="param-grid">
            `;

            for (const [key, param] of Object.entries(config.params)) {
                const inputType = param.type === 'text' ? 'text' : 'number';
                const extraAttrs = inputType === 'number'
                    ? `min="${param.min}" max="${param.max}" step="0.1"`
                    : '';

                html += `
                    <div class="param-group">
                        <label class="param-label">${param.label}</label>
                        <input
                            type="${inputType}"
                            class="param-input"
                            data-param="${key}"
                            value="${param.default}"
                            ${extraAttrs}
                        />
                    </div>
                `;
            }

            html += `
                    </div>
                    <button class="generate-btn" onclick="generateBuilding()">
                        ğŸš€ ç”Ÿæˆ ${config.name}
                    </button>
                    <div class="hint">
                        ğŸ’¡ æç¤ºï¼šå¯ä»¥ä¿®æ”¹å‚æ•°åå†ç”Ÿæˆï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»º3Dç™½æ¨¡
                    </div>
                </div>
            `;

            document.getElementById('paramsContainer').innerHTML = html;
        }

        // ç”Ÿæˆå»ºç­‘
        function generateBuilding() {
            if (!selectedIndustry || !selectedBuildingType) {
                alert('è¯·å…ˆé€‰æ‹©è¡Œä¸šå’Œå»ºç­‘ç±»å‹');
                return;
            }

            const config = buildingParams[selectedBuildingType];
            const params = {};

            document.querySelectorAll('.param-input').forEach(input => {
                const key = input.dataset.param;
                // æ•°å€¼å‚æ•°è½¬æ¢ä¸ºæ¯«ç±³å•ä½
                if (input.type === 'number') {
                    params[key] = parseFloat(input.value) * 1000; // ç±³è½¬æ¯«ç±³
                } else {
                    params[key] = input.value;
                }
            });

            const data = {
                industry: selectedIndustry,
                building_type: selectedBuildingType,
                building_name: config.name,
                params: params
            };

            console.log('ç”Ÿæˆå»ºç­‘:', data);

            // è°ƒç”¨SketchUp Rubyæ–¹æ³•
            if (window.sketchup) {
                window.sketchup.generate_building(JSON.stringify(data));
            } else {
                alert('SketchUpæ¥å£æœªå°±ç»ª\n\nè¯·åœ¨SketchUpä¸­æ‰“å¼€æ­¤ç•Œé¢');
            }
        }
    </script>
</body>
</html>
